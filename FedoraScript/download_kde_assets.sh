#!/bin/bash

# ==============================================================================
# download_kde_assets.sh
#
# 一个用于从直接链接下载 KDE 主题、小部件和壁纸的脚本。
#
# 重要提示：
# 此脚本需要直接下载链接，而不是网页地址。
# 您可以从 pling.com 或 store.kde.org 等网站获取这些链接。
#
# 如何获取直接下载链接：
# 1. 打开产品页面（例如，一个主题或壁纸）。
# 2. 找到“文件”或“Files”选项卡并点击。
# 3. 在您想要下载的文件上，右键点击下载按钮。
# 4. 从上下文菜单中选择“复制链接”或“复制链接地址”。
# 5. 在此脚本提示时，粘贴该链接。
# ==============================================================================

# 定义保存资产的目录
TARGET_DIR="kde_assets"

# 如果目标目录不存在，则创建它
echo "正在确保下载目录 '$TARGET_DIR' 存在..."
mkdir -p "$TARGET_DIR"
echo "目录已准备就绪。"
echo

# 提示用户输入一个或多个 URL，以空格分隔
echo "请粘贴直接下载链接（可粘贴多个，以空格分隔），然后按 Enter 键："
read -r -a URLS
echo

# 检查用户是否提供了任何 URL
if [ ${#URLS[@]} -eq 0 ]; then
    echo "未提供任何链接。正在退出。"
    exit 1
fi

# 循环遍历用户提供的每个 URL 并下载
for url in "${URLS[@]}"; do
    echo "--------------------------------------------------"
    echo "开始下载: $url"
    
    # 使用 wget 将文件下载到目标目录
    # -P 选项指定了文件保存的目录前缀。
    wget -P "$TARGET_DIR" "$url"
    
    # 检查上一条命令的退出状态 ($?)
    if [ $? -eq 0 ]; then
        echo "成功：下载已完成。"
    else
        echo "错误：从 $url 下载失败。"
    fi
    echo "--------------------------------------------------"
    echo
done

echo "所有下载任务均已完成。"
echo "您的文件已保存在 '$TARGET_DIR' 目录中。"